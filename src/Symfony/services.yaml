services:
  _defaults:
    autowire: true      # Automatically injects dependencies in your services.
    autoconfigure: true # Automatically registers your services as commands, event subscribers, etc.

  _instanceof:
    \Zantolov\ZoogleCms\Service\Document\Converting\ElementConverter:
      tags: [ 'zoogle_document_converter' ]
    \Zantolov\ZoogleCms\Service\Document\Processing\DocumentProcessor:
      tags: [ 'zoogle_document_processor' ]
    \Zantolov\ZoogleCms\Service\Html\Processing\HtmlProcessor:
      tags: [ 'zoogle_html_processor' ]

  Zantolov\ZoogleCms\:
    resource: '../../*'

  Zantolov\ZoogleCms\Bridge\Symfony\Controller\:
    resource: './Controller/*'
    tags: [ 'controller.service_arguments' ]

  Zantolov\ZoogleCms\Service\GoogleDrive\Client\GoogleDriveAuth:
    arguments:
      $authConfigPath: '%kernel.project_dir%/%env(GOOGLE_DRIVE_API_AUTH_FILE_PATH)%'
      $clientId: '%env(GOOGLE_DRIVE_API_CLIENT_ID)%'

  Zantolov\ZoogleCms\Service\GoogleDrive\Client\CachedGoogleDriveClient:
    arguments:
      $client: '@Zantolov\ZoogleCms\Service\GoogleDrive\Client\BaseGoogleDriveClient'

  Zantolov\ZoogleCms\Service\GoogleDrive\Client\GoogleDriveClient:
    factory: [ '@Zantolov\ZoogleCms\Service\GoogleDrive\Client\GoogleDriveClientFactory', 'create' ]
    arguments:
      $useCache: '%env(bool:ZOOGLE_CACHE)%'

  Zantolov\ZoogleCms\Service\GoogleDrive\Configuration\Configuration:
    arguments:
      $rootDirectoryId: '%env(GOOGLE_DRIVE_ROOT_DIRECTORY_ID)%'

  Zantolov\ZoogleCms\Service\Document\Converting\Converter:
    arguments:
      $converters: !tagged_iterator zoogle_document_converter

  Zantolov\Zoogle\Model\Service\Processing\DocumentProcessingHub:
    arguments:
      $processors: !tagged_iterator zoogle_document_processor

  Zantolov\ZoogleCms\Service\Html\Processing\HtmlProcessingHub:
    arguments:
      $processors: !tagged_iterator zoogle_html_processor
